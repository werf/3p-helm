apiVersion: v1
kind: Pod
metadata:
  name: "{{.Release.Name}}-service-test"
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: curl
      image: radial/busyboxplus:curl
      command: ['curl']
      args:  [ '{{ template "fullname" .}}:{{default 80 .Values.httpPort}}' ]
  restartPolicy: Never
---
apiVersion: v1
kind: Pod
metadata:
  name: "{{.Release.Name}}-service-failing-test"
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: curl
      image: radial/busyboxplus:curl
      command: ['curl']
      args:  [ '{{ template "fullname" .}}-service:{{default 80 .Values.httpPort}}' ]
  restartPolicy: Never
